<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>All Star Quiz</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div id="main-view" class="view">
    <h1 style="font-family: 'Arial Black', sans-serif; color:#ff0055; text-shadow: 2px 2px 0px #fff, 4px 4px 0px #000;">
        ALL STAR QUIZ
    </h1>
    <p style="text-align:center;">感謝祭モード</p>

    <div style="display:flex; flex-direction:column; gap:15px; margin-top:30px;">
        <button id="show-creator-btn" class="btn-primary">司会者（Host）：作問・進行</button>
        <button id="show-respondent-btn" class="btn-success">回答者（Player）：参加</button>
    </div>
</div>

<div id="creator-view" class="view hidden">
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h2 style="margin:0;">問題セット作成</h2>
        <button class="back-to-main">トップに戻る</button>
    </div>
    <hr>
    
    <div style="margin-bottom:15px;">
        <label style="font-weight:bold;">セット名（例：第1ピリオド）</label>
        <input type="text" id="quiz-set-title" class="btn-block" placeholder="タイトルを入力">
    </div>

    <div style="background:#fff0f5; padding:15px; border-radius:8px; border:2px solid #ff69b4;">
        <h3 style="margin-top:0; color:#c71585;">新規問題</h3>
        <input type="text" id="question-text" class="btn-block" placeholder="問題文" style="margin-bottom:10px;">
        
        <div id="choices-container" style="display:grid; grid-template-columns: 1fr 1fr; gap:5px;">
            <input type="text" class="choice-input btn-blue" placeholder="選択肢1 (青)">
            <input type="text" class="choice-input btn-red" placeholder="選択肢2 (赤)">
            <input type="text" class="choice-input btn-green" placeholder="選択肢3 (緑)">
            <input type="text" class="choice-input btn-yellow" placeholder="選択肢4 (黄)">
        </div>
        <p style="font-size:0.8em; color:#666;">※正解の番号を選んでください↓</p>
        <select id="correct-index" class="btn-block" style="margin-bottom:10px;">
            <option value="0">青 (選択肢1)</option>
            <option value="1">赤 (選択肢2)</option>
            <option value="2">緑 (選択肢3)</option>
            <option value="3">黄 (選択肢4)</option>
        </select>

        <button id="add-question-btn" class="btn-primary btn-block">リストに追加</button>
    </div>

    <div style="margin-top:20px;">
        <h4>作成中のリスト (<span id="q-count">0</span>問)</h4>
        <ul id="q-list" style="background:white; padding:10px; border:1px solid #ddd; min-height:50px; list-style:none;"></ul>
        
        <div style="display:flex; flex-direction:column; gap:10px; margin-top:15px;">
            <button id="save-stock-btn" class="btn-info btn-block" style="padding:15px; font-weight:bold;">
                💾 端末に保存してクリア（次のピリオド作成へ）
            </button>
            <p style="text-align:center; font-size:0.8em; margin:0;">↓ 本番当日用 ↓</p>
            <button id="go-to-studio-btn" class="btn-success btn-block" style="padding:15px; font-weight:bold; font-size:1.1em;">
                🎥 スタジオへ移動（部屋を開く）
            </button>
        </div>
        </div>
</div>

<div id="host-control-view" class="view hidden">
    <div style="background:#111; color:white; padding:15px; border-radius:8px; text-align:center; margin-bottom:20px; border:4px solid gold;">
        <div style="font-size:0.8em; color:gold;">ON AIR</div>
        <div id="host-room-id" style="font-size:2.5em; font-weight:bold; letter-spacing:3px;">---</div>
        <div style="display:flex; justify-content:space-around; margin-top:10px;">
            <div>参加: <span id="host-player-count">0</span>人</div>
            <div>生存: <span id="host-alive-count" style="color:#00ff00; font-weight:bold;">0</span>人</div>
        </div>
    </div>

    <div id="host-status-area" style="text-align:center; margin-bottom:20px; font-weight:bold; font-size:1.2em;">
        準備中...
    </div>

    <div style="background:#eee; padding:10px; border-radius:5px; margin-bottom:15px; border:2px solid #ccc;">
        <h4 style="margin:0 0 5px 0;">📂 ピリオド管理</h4>
        <select id="period-select" class="btn-block" style="background:white;"></select>
        <button id="host-load-period-btn" class="btn-dark btn-block">このセットを読み込んで開始</button>
    </div>
    <div style="display:flex; flex-direction:column; gap:10px;">
        <button id="host-new-period-btn" class="btn-warning btn-block hidden" style="border:2px solid #fff;">
            👑 全員復活させてスタート
        </button>
        
        <hr style="margin:5px 0; border-color:#ccc;">

        <button id="host-start-btn" class="btn-primary btn-block hidden" style="padding:15px; font-size:1.2em;">問題 START！</button>
        <button id="host-show-answer-btn" class="btn-danger btn-block hidden" style="padding:15px;">正解発表 (Sit Down)</button>
        
        <button id="host-eliminate-slowest-btn" class="btn-dark btn-block hidden">
            ☠️ 予選落ち (一番遅い人を脱落)
        </button>

        <button id="host-next-btn" class="btn-info btn-block hidden" style="padding:15px;">次の問題へ</button>
        
        <hr>
        <button id="host-ranking-btn" class="btn-success btn-block">
            🏆 ランキング集計
        </button>
    </div>
</div>

<div id="respondent-view" class="view hidden">
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h2>エントリー</h2>
        <button class="back-to-main">戻る</button>
    </div>
    <hr>
    <div style="text-align:center; padding:20px 0;">
        <input type="text" id="room-code-input" placeholder="部屋コード (6桁)" maxlength="6"
               style="font-size:1.5em; width:200px; text-align:center; text-transform:uppercase; margin-bottom:20px;">
        <input type="text" id="player-name-input" placeholder="名前を入力" 
               style="font-size:1.2em; width:200px; text-align:center; margin-bottom:20px; display:block; margin:0 auto 20px auto;">
        <button id="join-room-btn" class="btn-primary btn-block">参加する</button>
    </div>
</div>

<div id="player-game-view" class="view hidden">
    <div id="player-status-bar" style="display:flex; justify-content:space-between; margin-bottom:10px; font-size:0.9em; padding:5px; background:#eee; border-radius:4px;">
        <span id="player-name-disp" style="font-weight:bold;">名無し</span>
        <span id="alive-badge" style="background:#00ff00; color:black; padding:2px 6px; border-radius:4px; font-weight:bold;">STAND UP</span>
    </div>

    <div id="player-lobby-msg" style="text-align:center; padding:40px 0;">
        <h2>Ready?</h2>
        <p>画面を注視してください</p>
    </div>

    <div id="player-quiz-area" class="hidden">
        <div id="question-text-disp" style="background:#fff; border:2px solid #333; padding:15px; border-radius:8px; font-weight:bold; margin-bottom:15px; min-height:60px;">
            問題文
        </div>
        
        <div id="player-choices-area" style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; height:200px;">
            <button class="answer-btn btn-blue" data-index="0">1</button>
            <button class="answer-btn btn-red" data-index="1">2</button>
            <button class="answer-btn btn-green" data-index="2">3</button>
            <button class="answer-btn btn-yellow" data-index="3">4</button>
        </div>
        <div id="answer-timer-disp" style="text-align:right; font-family:monospace; margin-top:5px; color:#666;"></div>
    </div>
    
    <div id="player-wait-msg" class="hidden" style="text-align:center; padding:20px; font-weight:bold;">
        ANSWERED!<br>祈ってお待ちください...
    </div>

    <div id="player-dead-overlay" class="hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); color:white; display:flex; flex-direction:column; justify-content:center; align-items:center; z-index:999;">
        <h1 style="color:gray; font-size:3em;">Sit Down</h1>
        <p>脱落...</p>
        <p style="font-size:0.8em;">次のピリオドまでお待ち下さい</p>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script src="script.js"></script>
</body>
</html>

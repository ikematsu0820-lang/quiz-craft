<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz Studio</title>
<link rel="stylesheet" href="style_common.css?v=66">
<link rel="stylesheet" href="style_host.css?v=66">
<link rel="stylesheet" href="style_player.css?v=66">
<link rel="stylesheet" href="style_viewer.css?v=66">
</head>
<body>

<div id="toast-container"></div>

<div id="main-view" class="view landing-view">
    <div class="landing-content">
        <div class="landing-logo-area">
            <div class="landing-logo-emoji">ğŸ’¡</div>
            <h1 class="landing-title">Quiz Studio</h1>
            <p class="landing-subtitle">Cloud Edition</p>
        </div>

        <div class="landing-btn-area">
            <button id="main-host-btn" class="landing-btn btn-host-modern">
                <span class="btn-icon">âœï¸</span> ã‚¯ã‚¤ã‚ºã‚’ä½œã‚‹
            </button>
            <button id="main-player-btn" class="landing-btn btn-player-modern">
                <span class="btn-icon">âœ”</span> ã‚¯ã‚¤ã‚ºã«ç­”ãˆã‚‹
            </button>
        </div>
    </div>
</div>

<div id="host-login-view" class="view hidden center-content-view">
    <div class="view-header">
        <h2 data-text="Login.Title">ID Input</h2>
        <button class="header-back-btn back-to-main" data-text="Login.BackBtn">Home</button>
    </div>
    
    <div class="login-form-area">
        <img src="logo.png" alt="Quiz Studio" class="app-logo-small mb-20">
        <input type="text" id="show-id-input" class="input-large text-uppercase mb-20" placeholder="SHOW ID">
        <button id="host-login-submit-btn" class="btn-primary btn-block" data-text="Login.SubmitBtn">Login</button>
    </div>
</div>

<div id="host-dashboard-view" class="view hidden">
    <div class="view-header">
        <h3>Show: <span id="dashboard-show-id" class="accent-text">---</span></h3>
        <button class="header-back-btn btn-logout back-to-main" data-text="Dashboard.Logout">Logout</button>
    </div>

    <div class="dashboard-grid">
        <button id="dash-create-btn" class="dash-btn" data-text="Dashboard.BtnCreate">Create</button>
        <button id="dash-config-btn" class="dash-btn" data-text="Dashboard.BtnConfig">Config</button>
        <button id="dash-design-btn" class="dash-btn">ãƒ‡ã‚¶ã‚¤ãƒ³</button>

        <button id="dash-studio-btn" class="dash-btn studio-btn" data-text="Dashboard.BtnStudio">Studio</button>
        <button id="dash-viewer-btn" class="dash-btn" data-text="Dashboard.BtnViewer">Monitor</button>
    </div>

    <div class="dashboard-list-area">
        <h4 class="section-title" data-text="Dashboard.SetListTitle">Saved Sets</h4>
        <div id="dash-set-list" class="scroll-list"></div>
    </div>
</div>

<div id="design-view" class="view hidden">
    <div class="view-header">
        <h2>ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¹ã‚¿ã‚¸ã‚ª</h2>
        <button id="design-back-btn" class="header-back-btn back-to-main">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</button>
    </div>

    <div class="design-preview-area-top">
        <h4 class="preview-label">ãƒ¢ãƒ‹ã‚¿ãƒ¼ç”»é¢ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h4>
        <div class="design-preview-frame">
            <div id="design-monitor-preview-content"></div>
        </div>
        <p class="preview-note">â€»å®Ÿéš›ã®è¡¨ç¤ºã¨ã¯è§£åƒåº¦ãŒç•°ãªã‚Šã¾ã™</p>
    </div>

    <div class="design-toolbar">
        <div class="toolbar-select">
            <select id="design-target-select" class="btn-block">
                <option value="">-- ç·¨é›†å¯¾è±¡ã‚’é¸æŠ --</option>
            </select>
        </div>
        <button id="design-target-load-btn" class="btn-primary toolbar-btn">Load</button>
    </div>

    <div class="design-menu-grid">
        <button id="btn-open-text" class="design-menu-btn">
            <span class="menu-icon">T</span><br>ãƒ†ã‚­ã‚¹ãƒˆãƒ»é…ç½®
        </button>
        <button id="btn-open-object" class="design-menu-btn">
            <span class="menu-icon">â–¡</span><br>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
        </button>
        <button id="btn-open-bg" class="design-menu-btn">
            <span class="menu-icon">ğŸ–¼</span><br>èƒŒæ™¯
        </button>
    </div>

    <div class="design-action-row">
        <button id="design-reset-btn" class="btn-dark">åˆæœŸå€¤</button>
        <button id="design-save-btn" class="btn-success">ä¿å­˜ (å®Œäº†)</button>
    </div>

    <div id="modal-design-text" class="design-modal-overlay hidden">
        <div class="design-modal-content">
            <h3 class="modal-title">ãƒ†ã‚­ã‚¹ãƒˆè¨­å®š</h3>
            <div class="design-modal-body">
                <label class="config-label">æ–‡å­—ã®é…ç½® (Alignment)</label>
                <div class="align-btn-group">
                    <button type="button" class="btn-align" data-align="left">å·¦æƒãˆ</button>
                    <button type="button" class="btn-align active" data-align="center">ä¸­å¤®</button>
                    <button type="button" class="btn-align" data-align="right">å³æƒãˆ</button>
                </div>
                <input type="hidden" id="creator-set-align" value="center">

                <label class="config-label">å•é¡Œæ–‡ã®æ–‡å­—è‰²</label>
                <input type="color" id="design-q-text" class="color-picker-full">

                <label class="config-label">é¸æŠè‚¢ã®æ–‡å­—è‰²</label>
                <input type="color" id="design-c-text" class="color-picker-full">
            </div>
            <button class="btn-block btn-dark modal-close-btn">é–‰ã˜ã‚‹</button>
        </div>
    </div>

    <div id="modal-design-object" class="design-modal-overlay hidden">
        <div class="design-modal-content">
            <h3 class="modal-title">ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š</h3>
            <div class="design-modal-body">
                <label class="config-label">ãƒ¢ãƒ‹ã‚¿ãƒ¼ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ</label>
                <select id="creator-set-layout" class="btn-block mb-20">
                    <option value="standard">æ¨™æº– (ä¸Šä¸‹)</option>
                    <option value="split_list">å·¦å³åˆ†å‰² (ãƒªã‚¹ãƒˆ)</option>
                    <option value="split_grid">å·¦å³åˆ†å‰² (ã‚°ãƒªãƒƒãƒ‰)</option>
                </select>

                <h4 class="sub-title">å•é¡Œæ–‡ã‚¨ãƒªã‚¢</h4>
                <div class="grid-2-col">
                    <div>
                        <label class="mini-label">æ ç·š (Border)</label>
                        <input type="color" id="design-q-border" class="color-picker-full">
                    </div>
                    <div>
                        <label class="mini-label">èƒŒæ™¯ (Fill)</label>
                        <input type="color" id="design-q-bg" class="color-picker-full">
                    </div>
                </div>

                <h4 class="sub-title">é¸æŠè‚¢ã‚¨ãƒªã‚¢</h4>
                <div class="grid-2-col">
                    <div>
                        <label class="mini-label">æ ç·š (Border)</label>
                        <input type="color" id="design-c-border" class="color-picker-full">
                    </div>
                    <div>
                        <label class="mini-label">èƒŒæ™¯ (Fill)</label>
                        <input type="color" id="design-c-bg" class="color-picker-full">
                    </div>
                </div>
            </div>
            <button class="btn-block btn-dark modal-close-btn">é–‰ã˜ã‚‹</button>
        </div>
    </div>

    <div id="modal-design-bg" class="design-modal-overlay hidden">
        <div class="design-modal-content">
            <h3 class="modal-title">èƒŒæ™¯è¨­å®š</h3>
            <div class="design-modal-body">
                <label class="config-label">èƒŒæ™¯è‰² (Main Color)</label>
                <input type="color" id="design-main-bg-color" class="color-picker-full mb-20">

                <label class="config-label">èƒŒæ™¯ç”»åƒ (Image Upload)</label>
                <div class="image-upload-area">
                    <input type="file" id="design-bg-image-file" accept="image/*" style="display:none;">
                    <button id="design-bg-image-btn" class="btn-primary mb-10">ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</button>
                    <br>
                    <span id="design-bg-image-status" class="status-text">æœªé¸æŠ</span>
                    <button id="design-bg-clear-btn" class="btn-danger btn-mini mt-10">ç”»åƒè§£é™¤</button>
                </div>
                <input type="hidden" id="design-bg-image-data">
            </div>
            <button class="btn-block btn-dark modal-close-btn">é–‰ã˜ã‚‹</button>
        </div>
    </div>
</div>
    
<div id="creator-view" class="view hidden">
    <div class="view-header">
        <h2 data-text="Creator.Title">Creator</h2>
        <button id="creator-back-btn" class="header-back-btn back-to-main">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</button>
    </div>

    <div class="panel-section section-blue mb-20">
        <h4 class="panel-title" data-text="Creator.HeadingSettings">Set Settings</h4>
        <label class="config-label" data-text="Creator.LabelTypeFixed">Fixed Type</label>
        <select id="creator-q-type" class="btn-block bold-select"></select>
        <p id="creator-type-locked-msg" class="locked-msg hidden" data-text="Creator.MsgTypeLocked">Locked</p>
    </div>

    <div class="panel-section section-pink mb-20">
        <h3 id="creator-form-title" class="panel-title-large" data-text="Creator.HeadingNewQ">New Question</h3>
        <input type="text" id="question-text" class="btn-block mb-10" placeholder="">
        <div id="creator-form-container" class="mb-10"></div>
        
        <button id="add-question-btn" class="btn-primary btn-block mt-10" data-text="Creator.BtnAdd">Add</button>
        
        <div id="update-question-area" class="hidden grid-2-col gap-10 mt-10">
            <button id="update-question-btn" class="btn-success" data-text="Creator.BtnUpdateQ">Update</button>
            <button id="cancel-update-btn" class="btn-dark" data-text="Creator.BtnCancel">Cancel</button>
        </div>
    </div>

    <div class="creator-set-settings">
        <h5 data-text="Creator.ListHeading" class="mb-5">List</h5>
        <div id="q-list" class="scroll-list mb-15"></div>
        <button id="save-to-cloud-btn" class="btn-success btn-block btn-large" data-text="Creator.BtnSave">Save</button>
    </div>
</div>

<div id="config-view" class="view hidden">
    <div class="view-header">
        <h2 data-text="Config.Title">Rule Settings</h2>
        <button id="config-header-back-btn" class="header-back-btn back-to-main">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</button>
    </div>
    
    <div class="panel-section section-cyan mb-20">
        <h3 class="panel-title-center" data-text="Config.HeadingAdd">Add Period</h3>
        <div class="mb-15">
            <label class="config-label-large" data-text="Config.LabelSet">Set</label>
            <select id="config-set-select" class="btn-block config-select"></select>
        </div>
        <div id="config-builder-ui"></div>
    </div>

    <div class="config-playlist-area">
        <h4 class="section-title" data-text="Config.HeadingList">Playlist</h4>
        <div id="config-playlist-preview" class="scroll-list-dark">
            <p class="empty-msg">ã¾ã è¿½åŠ ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>
        </div>
        
        <div class="config-options-row">
            <label class="checkbox-label">
                <input type="checkbox" id="config-final-ranking-chk" checked> <span data-text="Config.LabelFinalRank">Final Ranking</span>
            </label>
        </div>
        
        <div class="save-prog-row">
            <input type="text" id="config-program-title" placeholder="æ§‹æˆåã‚’å…¥åŠ›" class="flex-input">
            <button id="config-save-program-btn" class="btn-info" data-text="Config.BtnSaveProg">Save</button>
        </div>

        <button id="config-open-load-modal-btn" class="btn-primary btn-block btn-large mb-20">
            ğŸ“‚ ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ç·¨é›†ã™ã‚‹
        </button>
    </div>

    <button id="config-go-studio-btn" class="btn-danger btn-block btn-large" data-text="Config.BtnGoStudio">Go Studio</button>

    <div id="config-load-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 class="modal-title">ç·¨é›†ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’é¸æŠ</h3>
            <p class="modal-note">â€»èª­ã¿è¾¼ã‚€ã¨ç¾åœ¨ã®ãƒªã‚¹ãƒˆã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™</p>
            
            <select id="config-prog-select" class="btn-block config-select mb-20">
                <option value="">èª­ã¿è¾¼ã¿ä¸­...</option>
            </select>
            
            <div class="grid-2-col gap-10">
                <button id="config-load-prog-exec-btn" class="btn-primary">Load</button>
                <button id="config-modal-close-btn" class="btn-dark">Cancel</button>
            </div>
        </div>
    </div>
</div>

<div id="host-control-view" class="view hidden">
    <div class="on-air-display">
        <div class="on-air-sub"><span data-text="Studio.OnAir">ON AIR</span> / <span id="studio-show-id">---</span></div>
        <div id="host-room-id" class="room-id-large">---</div>
        <div class="room-stats">
            <div><span data-text="Studio.LabelPlayer">Player</span>: <span id="host-player-count">0</span></div>
            <div><span data-text="Studio.LabelAlive">Alive</span>: <span id="host-alive-count" class="alive-count">0</span></div>
        </div>
    </div>

    <div id="studio-program-loader" class="panel-section section-blue mb-15">
        <h4 class="panel-title" data-text="Studio.HeadingLoad">Load</h4>
        <select id="studio-program-select" class="btn-block mb-5"></select>
        <button id="studio-load-program-btn" class="btn-primary btn-block" data-text="Studio.BtnLoad">Set</button>
    </div>

    <div id="host-buzz-winner-area" class="panel-section section-yellow hidden center-text">
        <div class="winner-label" data-text="Studio.MsgBuzzWin">WINNER</div>
        <div id="host-buzz-winner-name" class="winner-name">---</div>
    </div>

    <div id="host-kanpe-area" class="kanpe-card hidden">
        <div class="kanpe-badge" data-text="Studio.LabelKanpe">Kanpe</div>
        <div id="kanpe-question" class="kanpe-q"></div>
        <div id="kanpe-answer" class="kanpe-a"></div>
        <div id="kanpe-time-limit" class="kanpe-meta"></div>
        <div id="kanpe-point" class="kanpe-meta accent"></div>
    </div>

    <div id="host-status-area" class="studio-status-text" data-text="Studio.StatusReady">Ready...</div>

    <div id="host-panel-control-area" class="control-panel-container hidden">
        <h5 class="control-title" data-text="Studio.LabelPanelControl">Panel Control</h5>
        <div id="host-panel-grid" class="control-grid-5"></div>
    </div>

    <div id="host-bomb-control-area" class="control-panel-container hidden">
        <h5 class="control-title" data-text="Studio.LabelBombControl">Card Control</h5>
        <div id="host-bomb-grid" class="control-grid-5"></div>
    </div>

    <div id="host-multi-control-area" class="control-panel-container hidden">
        <h5 class="control-title" data-text="Studio.LabelMultiControl">Multi Answer Control</h5>
        <div id="host-multi-grid" class="control-grid-2"></div>
    </div>

    <div id="studio-timeline-area">
        <h4 class="section-title" data-text="Studio.HeadingList">List</h4>
        <div id="studio-period-timeline" class="timeline-container"></div>
        <div id="studio-footer-controls" class="studio-footer">
            <button id="studio-master-play-btn" class="btn-success btn-block btn-play" data-text="Studio.BtnMasterPlay">Play</button>
        </div>
    </div>

    <div id="control-panel" class="hidden">
        <h3 id="current-period-title" class="current-title"></h3>
        
        <button id="host-start-btn" class="btn-primary btn-block hidden btn-start" data-text="Studio.BtnStart">START</button>
        <button id="host-start-ta-btn" class="btn-danger btn-block hidden btn-ta-start" data-text="Studio.BtnStartTA">START 5s Loop</button>
        <button id="host-show-answer-btn" class="btn-danger btn-block hidden" data-text="Studio.BtnAnswer">Answer</button>

        <div id="host-manual-judge-area" class="hidden judge-grid">
            <button id="host-judge-correct-btn" class="btn-success judge-btn" data-text="Studio.BtnCorrect">Correct</button>
            <button id="host-judge-wrong-btn" class="btn-danger judge-btn" data-text="Studio.BtnWrong">Wrong</button>
            <button id="host-judge-pass-btn" class="btn-warning hidden judge-btn" data-text="Studio.BtnPass">Pass</button>
        </div>

        <button id="host-next-btn" class="btn-info btn-block hidden" data-text="Studio.BtnNextQ">Next</button>
        <hr>
        <button id="host-ranking-btn" class="btn-success btn-block" data-text="Studio.BtnRanking">Ranking</button>
    </div>
    <button id="host-close-studio-btn" class="btn-block btn-dark mt-30" data-text="Studio.BtnClose">Close</button>
</div>

<div id="ranking-view" class="view hidden center-text">
    <h2 class="ranking-title-main">RANKING</h2>
    <div id="ranking-list" class="ranking-container"></div>
    <button id="ranking-back-btn" class="btn-primary btn-block mt-20" data-text="Studio.BtnBackRanking">Back</button>
</div>

<div id="respondent-view" class="view hidden center-content-view">
    <div class="view-header">
        <h2 data-text="Player.TitleEntry">Entry</h2>
        <button class="header-back-btn back-to-main" data-text="Login.BackBtn">Home</button>
    </div>
    
    <div class="login-form-area">
        <input type="text" id="room-code-input" class="input-large text-uppercase mb-20" placeholder="CODE" maxlength="6">
        <input type="text" id="player-name-input" class="input-large mb-20" placeholder="NAME">
        <button id="join-room-btn" class="btn-primary btn-block" data-text="Player.BtnJoin">Join</button>
    </div>
</div>

<div id="player-game-view" class="view hidden">
    <div id="player-status-bar" class="player-status-bar">
        <span id="player-name-disp" class="player-name">---</span>
        <span id="alive-badge" class="alive-badge" data-text="Player.BadgeAlive">ALIVE</span>
    </div>
    
    <div id="score-display-area" class="hidden score-area">
        Score: <span id="current-score-value">0</span>
    </div>
    
    <div id="player-lobby-msg" class="lobby-msg"></div>
    
    <div id="player-buzz-area" class="hidden center-text mt-20">
        <button id="player-buzz-btn" class="buzz-btn" data-text="Player.BtnBuzz">PUSH!</button>
    </div>
    
    <div id="player-quiz-area" class="hidden">
        <div id="question-text-disp" class="player-q-text"></div>
        <div id="player-input-container"></div>
        <div id="answer-timer-disp" class="timer-disp"></div>
    </div>
    
    <div id="player-oral-done-area" class="hidden center-text mt-20">
        <button id="player-oral-done-btn" class="btn-primary btn-block btn-large" data-text="Player.BtnAnswered">Answered</button>
    </div>
    
    <div id="player-wait-msg" class="hidden wait-msg" data-text="Player.MsgAnswered">Answered...</div>
    
    <div id="player-result-overlay" class="hidden overlay-result">
        <div id="result-icon"></div>
        <div id="result-text"></div>
        <div id="result-detail"></div>
    </div>
    
    <div id="player-ranking-overlay" class="hidden overlay-ranking">
        <h2 class="rank-title" data-text="Player.RankTitle">RANKING</h2>
        <div data-text="Player.RankYou">You are...</div>
        <div id="player-my-rank" class="my-rank">---</div>
        <div id="player-my-score" class="my-score">---</div>
        <div class="leaderboard-box">
            <div class="lb-title" data-text="Player.RankBoardTitle">Top Leaders</div>
            <div id="player-leaderboard" class="lb-list"></div>
        </div>
    </div>
    
    <div id="player-dead-overlay" class="hidden overlay-dead">
        <h1 class="dead-title" data-text="Player.MsgDead">GAME OVER</h1>
        <p data-text="Player.MsgDeadBody">Dead...</p>
    </div>
</div>

<div id="viewer-login-view" class="view hidden center-content-view">
    <div class="view-header">
        <h2 data-text="Viewer.Title">Monitor Connect</h2>
        <button class="header-back-btn back-to-main">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</button>
    </div>
    
    <div class="login-form-area">
        <img src="logo.png" alt="Quiz Studio" class="app-logo-small mb-20">
        <input type="text" id="viewer-room-code" class="input-large text-uppercase mb-20" placeholder="CODE">
        <button id="viewer-connect-btn" class="btn-warning btn-block" data-text="Viewer.BtnConnect">Connect</button>
    </div>
</div>

<div id="viewer-main-view" class="view hidden">
    <div id="viewer-content">
        <div id="viewer-status"></div>
        <div id="viewer-main-text"></div>
        <div id="viewer-panel-grid" class="hidden"></div>
        <div id="viewer-bomb-grid" class="hidden"></div>
        <div id="viewer-multi-grid" class="hidden"></div>
        <div id="viewer-sub-text"></div>
        <div id="viewer-ranking-area"></div>
        <div id="viewer-race-area" class="hidden"></div>
        <div id="viewer-timer-bar-area" class="hidden">
            <div id="viewer-timer-bar"></div>
        </div>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script src="firebase.js"></script>
<script src="text_config.js?v=66"></script>

<script src="host_core.js?v=66"></script>
<script src="host_design.js?v=66"></script>
<script src="host_creator.js?v=66"></script>

<script src="host_config.js?v=66"></script>
<script src="host_studio.js?v=66"></script>
<script src="player.js?v=66"></script>
<script src="viewer.js?v=66"></script>

</body>
</html>

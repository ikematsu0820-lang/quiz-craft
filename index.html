<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>All Star Quiz Cloud</title>
<link rel="stylesheet" href="style.css?v=24">
</head>
<body>

<div id="main-view" class="view">
    <h1 class="app-title">ALL STAR QUIZ</h1>
    <p style="text-align:center; color:#666;">Cloud Edition v24</p>
    <div style="display:flex; flex-direction:column; gap:15px; margin-top:30px;">
        <button id="main-host-btn" class="btn-primary">司会者 (Host)</button>
        <button id="main-player-btn" class="btn-success">回答者 (Player)</button>
    </div>
</div>

<div id="host-login-view" class="view hidden">
    <h2>番組IDを入力</h2>
    <hr>
    <div style="text-align:center;">
        <input type="text" id="show-id-input" placeholder="例: QUIZ2026" 
               style="text-align:center; font-size:1.5em; text-transform:uppercase; margin-bottom:15px;">
        <button id="host-login-submit-btn" class="btn-primary btn-block">ログイン / 新規作成</button>
        <button class="back-to-main btn-block" style="background:#ccc; color:#333; margin-top:10px;">戻る</button>
    </div>
</div>

<div id="host-dashboard-view" class="view hidden">
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h3 style="margin:0;">番組: <span id="dashboard-show-id" style="color:#e91e63;">---</span></h3>
        <button class="back-to-main" style="font-size:0.8em;">ログアウト</button>
    </div>
    <hr>
    <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:8px; margin-bottom:20px;">
        <button id="dash-create-btn" class="btn-info" style="height:80px; font-weight:bold; font-size:0.9em;">セット作成</button>
        <button id="dash-config-btn" class="btn-primary" style="height:80px; font-weight:bold; font-size:0.9em; background-color:#2c3e50;">セット設定</button>
        <button id="dash-studio-btn" class="btn-danger" style="height:80px; font-weight:bold; font-size:0.9em;">スタジオ</button>
    </div>
    <h4 style="border-bottom:2px solid #ddd; padding-bottom:5px;">保存済みセット</h4>
    <div id="dash-set-list" style="max-height:300px; overflow-y:auto; background:#f9f9f9; padding:10px; border-radius:5px;"></div>
</div>

<div id="creator-view" class="view hidden">
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h2 style="margin:0;">問題作成</h2>
        <button id="creator-back-btn" style="background:#999; padding:5px 10px;">ダッシュボードへ</button>
    </div>
    <hr>
    <div style="margin-bottom:15px;">
        <label style="font-weight:bold;">セット名</label>
        <input type="text" id="quiz-set-title" class="btn-block" placeholder="例: 第1ステージ" style="margin-bottom:10px;">
    </div>
    <div style="background:#fff0f5; padding:15px; border-radius:8px; border:2px solid #ff69b4;">
        <h3 style="margin-top:0; color:#c71585;">新規問題</h3>
        <input type="text" id="question-text" class="btn-block" placeholder="問題文" style="margin-bottom:10px;">
        <div id="choices-container" style="display:grid; grid-template-columns: 1fr 1fr; gap:5px;">
            <input type="text" class="choice-input btn-blue" placeholder="A">
            <input type="text" class="choice-input btn-red" placeholder="B">
            <input type="text" class="choice-input btn-green" placeholder="C">
            <input type="text" class="choice-input btn-yellow" placeholder="D">
        </div>
        <select id="correct-index" class="btn-block" style="margin-top:10px;">
            <option value="0">正解: A (青)</option>
            <option value="1">正解: B (赤)</option>
            <option value="2">正解: C (緑)</option>
            <option value="3">正解: D (黄)</option>
        </select>
        <button id="add-question-btn" class="btn-primary btn-block" style="margin-top:10px;">リストに追加</button>
    </div>
    <div style="margin-top:20px;">
        <h4>作成中のリスト (<span id="q-count">0</span>問)</h4>
        <ul id="q-list" style="background:white; padding:10px; border:1px solid #ddd; min-height:50px; list-style:none;"></ul>
        <button id="save-to-cloud-btn" class="btn-success btn-block" style="padding:15px; font-weight:bold; margin-top:15px;">クラウドに保存して完了</button>
    </div>
</div>

<div id="config-view" class="view hidden">
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h2 style="margin:0;">セット設定</h2>
        <button id="config-header-back-btn" style="background:#999; padding:5px 10px; font-size:0.8em;">戻る</button>
    </div>
    <hr>
    
    <div style="background:#f0f8ff; padding:15px; border:2px solid #87ceeb; border-radius:8px; margin-bottom:20px;">
        <h3 style="margin:0 0 10px 0; color:#0055ff; font-size:1.1em; text-align:center;">ピリオド（セット）を構成に追加</h3>
        
        <div style="margin-bottom:15px;">
            <label class="config-label">1. セットを選択</label>
            <select id="config-set-select" class="btn-block config-select">
                <option value="">読み込み中...</option>
            </select>
        </div>

        <div style="margin-bottom:15px;">
            <label class="config-label">2. ルール設定</label>
            
            <label style="font-size:0.8em; color:#666;">▼ 脱落条件</label>
            <select id="config-elimination-rule" class="btn-block config-select" style="margin-bottom:8px;">
                <option value="none">脱落なし（ランキング戦）</option>
                <option value="wrong_only">不正解者のみ脱落</option>
                <option value="wrong_and_slowest">不正解 ＋ 一番遅い人も脱落</option>
            </select>
            
            <div id="config-elimination-count-area" class="hidden" style="margin-bottom:8px; padding:8px; background:#fff; border:1px solid #ddd; border-radius:4px;">
                <div style="display:flex; align-items:center; gap:10px;">
                    <span style="font-size:0.8em; font-weight:bold; color:#d00;">遅い順に</span>
                    <input type="number" id="config-elimination-count" value="1" min="1" style="width:60px; text-align:center; padding:5px;">
                    <span style="font-size:0.8em;">名が脱落</span>
                </div>
            </div>

            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:5px;">
                <div>
                    <label style="font-size:0.7em; color:#666;">制限時間</label>
                    <select id="config-time-limit" class="config-select">
                        <option value="0">無制限</option>
                        <option value="10">10秒</option>
                        <option value="20">20秒</option>
                        <option value="30">30秒</option>
                        <option value="60
